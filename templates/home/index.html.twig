{% extends 'layout.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello {{ app.user.username is defined? app.user.username : "Visitant" }}! âœ…</h1>

<div class="jumbotron">
  <h1>Movie Game</h1>
  <p>MV is the most popular Game...</p>
</div>

{% if is_granted('ROLE_ADMIN') %}
   <div class="bg-danger row">
            Tableau de bord admin Ajax

        <div class="col bg-dark">
            <p id="nbm">Nombre de matches</p>
        </div>

        <div class="col bg-info">
            <p id="nbp">Nombre de Participants</p>
        </div>

        <div class="col bg-secondary">
            <p id="nbf">Nombre de Films</p>
        </div>
   </div>
   
    <script>
        $(document).ready(function(){
        
            $.get("api/matches", function(data, status){
            var txt2 = $("<p></p>").text(data["hydra:totalItems"]);    
            $("#nbm").append(txt2).animate({left: '250px'}, "slow");;
            console.log(data["hydra:totalItems"]);
            });

            $.get("api/participants", function(data, status){
            var txt2 = $("<p></p>").text(data["hydra:totalItems"]);    
            $("#nbp").append(txt2);
            console.log(data["hydra:totalItems"]);
            });

            $.get("api/films", function(data, status){
            var txt2 = $("<p></p>").text(data["hydra:totalItems"]);    
            $("#nbf").append(txt2);
            console.log(data["hydra:totalItems"]);
            });
       
        });
    </script>
{% elseif is_granted('ROLE_USER') %}
   <div class="bg-success">
   Mes Match
   </div>
{% else %}
    Anonymous
{% endif %}
</div>
{% endblock %}
